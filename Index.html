<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rajat & Sakshi - Wedding Celebrations</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.min.css">
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap"
    rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #fff5e6 0%, #ffe5cc 50%, #ffd9b3 100%);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    .petal {
      position: fixed;
      width: 15px;
      height: 15px;
      background: radial-gradient(circle, #ff9999, #ffb3b3);
      border-radius: 50% 0 50% 0;
      opacity: 0.7;
      pointer-events: none;
      z-index: 1;
      animation: fall linear infinite;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }

      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    .container-fluid {
      max-width: 1400px;
      margin: 0 auto;
      position: relative;
      z-index: 10;
    }

    .wedding-header {
      text-align: center;
      margin-bottom: 50px;
      animation: fadeInDown 1s ease-in-out;
      background: rgba(255, 255, 255, 0.95);
      padding: 40px 30px;
      border-radius: 25px;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);
      border: 2px solid rgba(212, 165, 116, 0.2);
    }

    .couple-names {
      font-family: 'Great Vibes', cursive;
      font-size: 72px;
      color: #d4a574;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      line-height: 1.2;
    }

    .ampersand {
      font-size: 60px;
      color: #c9945f;
      margin: 0 15px;
      display: inline-block;
      animation: heartbeat 2s infinite;
    }

    @keyframes heartbeat {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.1);
      }
    }

    .monogram-logo {
      width: 120px;
      height: 120px;
      margin: 20px auto 30px;
      display: block;
      filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.15));
      animation: fadeIn 1.5s ease-in-out;
    }

    .wedding-tagline {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      color: #8b7355;
      letter-spacing: 4px;
      text-transform: uppercase;
      margin-top: 15px;
    }

    .wedding-hashtag {
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      color: #d4a574;
      margin-top: 10px;
      font-weight: 500;
    }

    .sidebar {
      background: rgba(255, 255, 255, 0.98);
      border-radius: 20px;
      padding: 35px 25px;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.12);
      height: fit-content;
      position: sticky;
      top: 20px;
      border: 2px solid rgba(212, 165, 116, 0.2);
      animation: fadeInLeft 0.8s ease-in-out;
    }

    .sidebar h5 {
      color: #8b7355;
      font-weight: 600;
      margin-bottom: 30px;
      text-transform: uppercase;
      font-size: 14px;
      letter-spacing: 2px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sidebar h5 i {
      font-size: 20px;
      color: #d4a574;
    }

    .timeline {
      position: relative;
      padding-left: 35px;
    }

    .timeline::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(180deg, #d4a574 0%, #d4a574 70%, transparent 100%);
      border-radius: 10px;
    }

    .timeline-item {
      position: relative;
      margin-bottom: 30px;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 12px 15px;
      border-radius: 10px;
    }

    .timeline-item:hover {
      background: rgba(212, 165, 116, 0.08);
      transform: translateX(5px);
    }

    .timeline-item::before {
      content: '';
      position: absolute;
      left: -42px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #e8dcc8;
      border: 3px solid #d4a574;
      transition: all 0.4s ease;
      box-shadow: 0 0 0 0 rgba(212, 165, 116, 0.4);
    }

    .timeline-item.active::before {
      background: #d4a574;
      width: 22px;
      height: 22px;
      left: -45px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        box-shadow: 0 0 0 0 rgba(212, 165, 116, 0.7);
      }

      50% {
        box-shadow: 0 0 0 10px rgba(212, 165, 116, 0);
      }
    }

    .timeline-item-text {
      font-size: 15px;
      color: #666;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .timeline-item-text i {
      font-size: 18px;
      color: #d4a574;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .timeline-item.active .timeline-item-text {
      color: #d4a574;
      font-weight: 600;
    }

    .timeline-item.active .timeline-item-text i {
      opacity: 1;
    }

    .countdown-badge {
      font-size: 11px;
      color: #fff;
      background: #d4a574;
      padding: 3px 8px;
      border-radius: 10px;
      margin-top: 5px;
      display: inline-block;
      font-weight: 500;
    }

    .hero-section {
      background: rgba(255, 255, 255, 0.98);
      border-radius: 25px;
      padding: 70px 50px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
      text-align: center;
      position: relative;
      overflow: hidden;
      border: 2px solid rgba(212, 165, 116, 0.2);
      animation: fadeInUp 0.8s ease-in-out;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .hero-section::before,
    .hero-section::after {
      content: '❖';
      position: absolute;
      font-size: 30px;
      color: #d4a574;
      opacity: 0.3;
    }

    .hero-section::before {
      top: 20px;
      left: 20px;
    }

    .hero-section::after {
      bottom: 20px;
      right: 20px;
    }

    .hero-image {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
      border-radius: 20px;
      margin-bottom: 40px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;
    }

    .hero-image:hover {
      transform: scale(1.02);
    }

    .invitation-badge {
      display: inline-block;
      text-transform: uppercase;
      font-size: 13px;
      color: #8b7355;
      letter-spacing: 3px;
      margin-bottom: 20px;
      padding: 8px 20px;
      border: 1px solid #d4a574;
      border-radius: 20px;
      background: rgba(212, 165, 116, 0.05);
      animation: fadeIn 1s ease-in-out 0.3s both;
    }

    .hero-title {
      font-family: 'Great Vibes', cursive;
      font-size: 72px;
      font-weight: 400;
      color: #2c2c2c;
      margin-bottom: 20px;
      line-height: 1.2;
      animation: fadeIn 1s ease-in-out 0.5s both;
    }

    .countdown-container {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 30px 0;
      animation: fadeIn 1s ease-in-out 0.6s both;
    }

    .countdown-box {
      background: linear-gradient(135deg, #fff9f0 0%, #fff5e6 100%);
      padding: 20px 25px;
      border-radius: 12px;
      border: 2px solid #f0e5d8;
      min-width: 80px;
    }

    .countdown-number {
      font-size: 32px;
      font-weight: 700;
      color: #d4a574;
      font-family: 'Playfair Display', serif;
    }

    .countdown-label {
      font-size: 12px;
      color: #8b7355;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 5px;
    }

    .divider {
      width: 80px;
      height: 3px;
      background: linear-gradient(90deg, transparent, #d4a574, transparent);
      margin: 35px auto;
      position: relative;
      animation: fadeIn 1s ease-in-out 0.7s both;
    }

    .divider::before {
      content: '♥';
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 0 10px;
      color: #d4a574;
      font-size: 18px;
    }

    .event-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 25px;
      margin: 50px 0;
      animation: fadeIn 1s ease-in-out 0.9s both;
    }

    .detail-box {
      background: linear-gradient(135deg, #fff9f0 0%, #fff5e6 100%);
      padding: 30px;
      border-radius: 15px;
      border: 2px solid #f0e5d8;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .detail-box::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(212, 165, 116, 0.1) 0%, transparent 70%);
      transform: scale(0);
      transition: transform 0.6s ease;
    }

    .detail-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(212, 165, 116, 0.25);
      border-color: #d4a574;
    }

    .detail-box:hover::before {
      transform: scale(1);
    }

    .detail-icon {
      font-size: 32px;
      color: #d4a574;
      margin-bottom: 15px;
    }

    .detail-label {
      font-size: 12px;
      color: #8b7355;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .detail-value {
      font-size: 24px;
      color: #2c2c2c;
      font-weight: 600;
      margin-bottom: 5px;
      font-family: 'Playfair Display', serif;
    }

    .detail-subvalue {
      font-size: 16px;
      color: #d4a574;
      font-weight: 500;
    }

    .dress-code-section {
      margin: 30px 0;
      animation: fadeIn 1s ease-in-out 1.0s both;
    }

    .dress-code-badge {
      display: inline-block;
      background: linear-gradient(135deg, #d4a574 0%, #c9945f 100%);
      color: white;
      padding: 12px 30px;
      border-radius: 25px;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 1px;
      box-shadow: 0 5px 20px rgba(212, 165, 116, 0.3);
    }

    .dress-code-badge i {
      margin-right: 8px;
    }

    .description {
      font-size: 18px;
      color: #555;
      line-height: 2;
      margin: 40px 0;
      font-style: italic;
      font-family: 'Playfair Display', serif;
      animation: fadeIn 1s ease-in-out 1.1s both;
    }

    .location {
      font-size: 16px;
      color: #888;
      margin-bottom: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      animation: fadeIn 1s ease-in-out 1.3s both;
    }

    .location i {
      font-size: 22px;
      color: #d4a574;
    }

    .btn-custom {
      background: linear-gradient(135deg, #d4a574 0%, #c9945f 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 30px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.4s ease;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin: 10px;
      box-shadow: 0 8px 20px rgba(212, 165, 116, 0.3);
      display: inline-flex;
      align-items: center;
      gap: 10px;
      animation: fadeIn 1s ease-in-out 1.5s both;
    }

    .btn-custom i {
      font-size: 16px;
    }

    .btn-custom:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(212, 165, 116, 0.4);
      color: white;
      background: linear-gradient(135deg, #c9945f 0%, #d4a574 100%);
    }

    .btn-custom:active {
      transform: translateY(-1px);
    }

    .loading {
      text-align: center;
      padding: 60px;
      color: #8b7355;
      font-size: 20px;
      font-family: 'Playfair Display', serif;
    }

    .loading i {
      font-size: 40px;
      animation: spin 2s linear infinite;
      display: block;
      margin-bottom: 20px;
      color: #d4a574;
    }

    @keyframes spin {
      100% {
        transform: rotate(360deg);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }

      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .couple-names {
        font-size: 48px;
      }

      .monogram-logo {
        width: 100px;
        height: 100px;
      }

      .hero-title {
        font-size: 42px;
      }

      .hero-section {
        padding: 40px 25px;
      }

      .event-details {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .countdown-container {
        gap: 15px;
      }

      .countdown-box {
        min-width: 60px;
        padding: 15px 20px;
      }

      .countdown-number {
        font-size: 24px;
      }

      .sidebar {
        margin-bottom: 30px;
        position: static;
      }
    }
  </style>
</head>

<body>
  <div id="petals-container"></div>

  <div class="container-fluid">
    <div class="wedding-header">
      <!-- Add your uploaded monogram image URL here later -->
      <img src="https://lh3.googleusercontent.com/d/1qJTEQEAxe0FRmV6b_xFItFlqaPXt1rij" alt="S♥L" class="monogram-logo">

      <div class="couple-names">
        Rajat <span class="ampersand">&</span> Sakshi
      </div>
      <div class="wedding-tagline">are getting married</div>
      <div class="wedding-hashtag">#RajatKiShaadi</div>
    </div>

    <div class="row">
      <div class="col-lg-4">
        <div class="sidebar">
          <h5><i class="bi bi-calendar-heart"></i> Upcoming Events</h5>
          <div class="timeline" id="timeline">
            <div class="loading">
              <i class="bi bi-hourglass-split"></i>
              Loading events...
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-8">
        <div class="hero-section" id="mainContent">
          <div class="loading">
            <i class="bi bi-hourglass-split"></i>
            Loading event details...
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let allEvents = [];
    let currentEventIndex = 0;

    function createPetals() {
      const petalsContainer = document.getElementById('petals-container');
      const petalCount = 20;

      for (let i = 0; i < petalCount; i++) {
        const petal = document.createElement('div');
        petal.className = 'petal';
        petal.style.left = Math.random() * 100 + '%';
        petal.style.animationDuration = (Math.random() * 3 + 5) + 's';
        petal.style.animationDelay = Math.random() * 5 + 's';
        petalsContainer.appendChild(petal);
      }
    }

    function getDaysUntil(dateString) {
      const eventDate = new Date(dateString);
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      const diffTime = eventDate - today;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      return diffDays;
    }

    function getCountdown(dateString) {
      const eventDate = new Date(dateString);
      const now = new Date();
      const diff = eventDate - now;

      if (diff <= 0) {
        return { days: 0, hours: 0, minutes: 0, seconds: 0 };
      }

      return {
        days: Math.floor(diff / (1000 * 60 * 60 * 24)),
        hours: Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
        minutes: Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)),
        seconds: Math.floor((diff % (1000 * 60)) / 1000)
      };
    }

    document.addEventListener('DOMContentLoaded', function() {
      createPetals();
      fetchEvents();
    });

    function fetchEvents() {
      google.script.run.withSuccessHandler(function(events) {
        allEvents = events;
        console.log("Events->", events);
        renderTimeline();
        renderMainContent(0);
        startCountdown();
      }).withFailureHandler(function(error) {
        console.error('Error loading events:', error);
        document.getElementById('mainContent').innerHTML = 
          '<div class="loading"><i class="bi bi-exclamation-triangle"></i>Error loading events. Please refresh the page.</div>';
      }).getEvents();
    }

    const eventIcons = {
      'Bachelor Party': 'bi-balloon-heart',
      'Bachelorette Party': 'bi-balloon-heart',
      'Engagement': 'bi-suit-heart',
      'Haldi': 'bi-flower1',
      'Sangeet': 'bi-music-note-beamed',
      'Wedding Day': 'bi-gem',
      'default': 'bi-calendar-event'
    };

    function getEventIcon(eventName) {
      return eventIcons[eventName] || eventIcons['default'];
    }

    function renderTimeline() {
      const timeline = document.getElementById('timeline');
      timeline.innerHTML = '';

      allEvents?.forEach(function(event, index) {
        const item = document.createElement('div');
        item.className = 'timeline-item' + (index === 0 ? ' active' : '');
        const icon = getEventIcon(event.name);
        const daysUntil = getDaysUntil(event.date);
        const countdownText = daysUntil > 0 ? daysUntil + ' days' : daysUntil === 0 ? 'Today!' : 'Passed';
        
        item.innerHTML = '<div class="timeline-item-text"><i class="bi ' + icon + '"></i>' + event.name + '</div>' +
          (daysUntil >= 0 ? '<div class="countdown-badge">' + countdownText + '</div>' : '');
        item.onclick = function() { switchEvent(index); };
        timeline.appendChild(item);
      });
    }

    function switchEvent(index) {
      currentEventIndex = index;
      
      document.querySelectorAll('.timeline-item').forEach(function(item, i) {
        item.classList.toggle('active', i === index);
      });

      const mainContent = document.getElementById('mainContent');
      mainContent.style.opacity = '0';
      mainContent.style.transform = 'translateY(20px)';
      
      setTimeout(function() {
        renderMainContent(index);
        mainContent.style.opacity = '1';
        mainContent.style.transform = 'translateY(0)';
      }, 300);
    }

    function renderMainContent(index) {
      const event = allEvents[index];
      const mainContent = document.getElementById('mainContent');

      const dateObj = new Date(event.date);
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const formattedDate = dateObj.toLocaleDateString('en-US', options);
      
      const dayOfWeek = formattedDate.split(',')[0];
      const dateDetails = formattedDate.split(',').slice(1).join(',').trim();

      let imageHtml = '';
      if (event.imageUrl && event.imageUrl.trim() && !event.imageUrl.includes('[image-url]')) {
        imageHtml = '<img src="' + event.imageUrl + '" alt="' + event.name + '" class="hero-image">';
      }

      const icon = getEventIcon(event.name);
      const countdown = getCountdown(event.date + ' ' + event.time);

      let countdownHtml = '';
      if (countdown.days >= 0) {
        countdownHtml = '<div class="countdown-container" id="countdown-' + index + '">' +
          '<div class="countdown-box">' +
            '<div class="countdown-number" id="days-' + index + '">' + countdown.days + '</div>' +
            '<div class="countdown-label">Days</div>' +
          '</div>' +
          '<div class="countdown-box">' +
            '<div class="countdown-number" id="hours-' + index + '">' + countdown.hours + '</div>' +
            '<div class="countdown-label">Hours</div>' +
          '</div>' +
          '<div class="countdown-box">' +
            '<div class="countdown-number" id="minutes-' + index + '">' + countdown.minutes + '</div>' +
            '<div class="countdown-label">Minutes</div>' +
          '</div>' +
          '<div class="countdown-box">' +
            '<div class="countdown-number" id="seconds-' + index + '">' + countdown.seconds + '</div>' +
            '<div class="countdown-label">Seconds</div>' +
          '</div>' +
        '</div>';
      }

      mainContent.innerHTML = imageHtml +
        '<div class="invitation-badge"><i class="bi bi-envelope-heart"></i> You\'re invited to</div>' +
        '<h1 class="hero-title">' + event.name + '</h1>' +
        countdownHtml +
        '<div class="divider"></div>' +
        '<div class="event-details">' +
          '<div class="detail-box">' +
            '<i class="bi bi-calendar-check detail-icon"></i>' +
            '<div class="detail-label">Date</div>' +
            '<div class="detail-value">' + dayOfWeek + '</div>' +
            '<div class="detail-subvalue">' + dateDetails + '</div>' +
          '</div>' +
          '<div class="detail-box">' +
            '<i class="bi bi-clock detail-icon"></i>' +
            '<div class="detail-label">Time</div>' +
            '<div class="detail-value">' + event.time + '</div>' +
            '<div class="detail-subvalue">IST</div>' +
          '</div>' +
        '</div>' +
        '<div class="location">' +
          '<i class="bi bi-geo-alt-fill"></i>' +
          '<span>' + event.location + '</span>' +
        '</div>' +
        '<p class="description">"' + event.description + '"</p>' +
        '<div class="dress-code-section">' +
          '<div class="dress-code-badge">' +
            '<i class="bi bi-tag"></i>' + event.hashtag +
          '</div>' +
        '</div>' +
        '<div class="divider"></div>' +
        '<div>' +
          '<button class="btn-custom" onclick="handleRSVP()">' +
            '<i class="bi bi-check2-circle"></i> RSVP Now' +
          '</button>' +
          '<button class="btn-custom" onclick="openMaps()">' +
            '<i class="bi bi-map"></i> Get Directions' +
          '</button>' +
        '</div>';
    }

    function startCountdown() {
      setInterval(function() {
        if (allEvents.length > 0) {
          const event = allEvents[currentEventIndex];
          const countdown = getCountdown(event.date + ' ' + event.time);
          
          const daysEl = document.getElementById('days-' + currentEventIndex);
          const hoursEl = document.getElementById('hours-' + currentEventIndex);
          const minutesEl = document.getElementById('minutes-' + currentEventIndex);
          const secondsEl = document.getElementById('seconds-' + currentEventIndex);

          if (daysEl) daysEl.textContent = countdown.days;
          if (hoursEl) hoursEl.textContent = countdown.hours;
          if (minutesEl) minutesEl.textContent = countdown.minutes;
          if (secondsEl) secondsEl.textContent = countdown.seconds;
        }
      }, 1000);
    }

    function handleRSVP() {
      const event = allEvents[currentEventIndex];
      alert('Thank you for confirming your attendance for ' + event.name + '!\n\nRajat & Sakshi are excited to celebrate with you!\n\nEvent: ' + event.name + '\nDate: ' + event.date + '\nTime: ' + event.time + '\nLocation: ' + event.location + '\n\n' + event.hashtag);
    }

    function openMaps() {
      const location = allEvents[currentEventIndex].location;
      const url = 'https:' + '//' + 'www.google.com/maps/search/' + encodeURIComponent(location);
      window.open(url, '_blank');
    }
  </script>
</body>

</html>